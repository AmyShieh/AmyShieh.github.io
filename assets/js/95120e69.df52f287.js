"use strict";(self.webpackChunkmy_docusaurus_blog=self.webpackChunkmy_docusaurus_blog||[]).push([[1516],{29417:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>S,contentTitle:()=>j,default:()=>Z,frontMatter:()=>M,metadata:()=>P,toc:()=>B});var a=n(87462),r=n(67294),s=n(3905),o=n(99477),c=n(69814),l=n(69365),i=n(24065),d=n(54458),u=n(58939),p=n(77836),m=n(72269),f=n(97029);const w=800,h=500,g=new o.zf8(50),v=new o.DvJ(100,100,100),b=new o.xo$(50),y=new o._12(100,100),E=new o.VLJ(300,10,16711918,14544639),k=new p.E;new o.iMs;function x(e){const{type:t}=e,n=(0,r.useRef)(null),a=new o.xsS,[s,p]=(0,r.useState)(b),[x,T]=(0,r.useState)((new o.dpR).load("https://gd-hbimg.huaban.com/55a9bf701ec3c9bf7a780e01bf79ef5721cc29f9c9bff-kcQlZy_fw1200webp")),[C,A]=(0,r.useState)(!1),M=(0,r.useMemo)((()=>new o.xoR({map:x,transparent:C})),[x,C]),j=(0,r.useMemo)((()=>new o.Kj0(s,M)),[s,M,t]),[P,S]=(0,r.useState)(new o.y8_(200)),B=new o.Mig(16777215,.8),_=new o.Ox3(16777215,.8);_.position.set(400,200,300);const[F,Z]=(0,r.useState)(new o.cPb(30,w/h,.1,1e4)),W=(0,r.useMemo)((()=>new o.ZAu),[t]),z=(0,r.useMemo)((()=>new o.CP7({antialias:!0,preserveDrawingBuffer:!0})),[t]),D=(0,r.useMemo)((()=>new l.z(F,z.domElement)),[z,t]),[O,R]=(0,r.useState)(!1),[G,J]=(0,r.useState)(0),X=new i.x(z),I=new d.C(a,F),[K,L]=(0,r.useState)(new o.FM8);X.addPass(I);const N=new o.FM8(w,h),q=new u.f(N,a,F);q.visibleEdgeColor.set(255);const $=(0,r.useCallback)((()=>{const e=z.domElement,t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="threejs.png",t.click()}),[]);return(0,r.useEffect)((()=>{z?.domElement?.addEventListener("click",(e=>{const{offsetX:t,offsetY:n}=e,a=t/w*2-1,r=-n/h*2+1;console.log({px:t,py:n,x:a,y:r}),L(new o.FM8(a,r))}))}),[z,F,a.children]),(0,r.useEffect)((()=>{z.setSize(w,h),z.setClearColor(16711918,.05)}),[z]),(0,r.useEffect)((()=>{switch(F.position.set(200,200,200),F.lookAt(0,0,0),t){case"basic":S(new o.y8_(1e3));for(let e=0;e<3;e++){const t=new o.vBJ({color:268435200}),n=new o.Kj0(v,t);n.position.x=200*e,W.add(n)}return F.position.set(875,370,700),F.lookAt(184,50,90),D.target.set(184,50,90),void D.update();case"uv":return void p(g);case"arrayPattern":{p(y);const e=(new o.dpR).load("https://gd-hbimg.huaban.com/0937ce9c977cd9b6714d948e9e933a6b7e1bd3562a1a6-zSpiyj_fw658webp");return e.wrapS=o.rpg,e.wrapT=o.rpg,e.repeat.set(10,10),T(e),void F.position.set(100,100,100)}case"transparentTextureWithGrid":{const e=(new o.dpR).load("https://gd-hbimg.huaban.com/3af0ba78ca7c7aab9642efaa47d45b70dfebe91d222d-ycdmz3_fw1200webp");return A(!0),T(e),p(y),F.position.set(30,707,569),F.lookAt(-10,25,30),D.target.set(-10,25,30),void D.update()}case"textureOffset":{const e=(new o.dpR).load("https://gd-hbimg.huaban.com/c472d5cd84f9b26202e80b1609a9b0bd24acda301eb6-ZkWnbg_fw658webp");return A(!0),e.wrapS=o.rpg,T(e),void p(y)}case"gltf":return S(new o.y8_(2)),k.load("/resource/fist.gltf",(e=>{e.scene.traverse((e=>{e.isMesh&&(e.metalness=1,e.roughness=0)})),W.add(e.scene)}),(e=>{const{lengthComputable:t,loaded:n,total:a}=e;R(t),J(t?n/a:n)})),F.position.set(4,1,4),void F.lookAt(-1,0,-1);case"traverse":{const e=new o.ZAu;e.name="\u9ad8\u5c42\u697c";for(let n=0;n<5;n++){const t=new o.DvJ(40,200,40),a=new o.vBJ({color:268435200}),r=new o.Kj0(t,a);r.position.x=60*n,r.name=`${n+1}\u53f7\u697c`,e.add(r)}e.position.y=100;const t=new o.ZAu;t.name="\u6d0b\u623f";for(let n=0;n<5;n++){const e=new o.DvJ(40,60,40),a=new o.vBJ({color:65535}),r=new o.Kj0(e,a);r.position.x=60*n,r.name=`${n+1}\u53f7\u697c`,t.add(r)}return t.position.z+=100,t.position.y=30,W.add(e,t),W.traverse((e=>{"2\u53f7\u697c"===e.name&&e.material.color.set(16231612)})),F.position.set(30,707,568),F.lookAt(91,28,35),D.target.set(91,28,35),void D.update()}default:return}}),[t]),(0,r.useEffect)((()=>{a.add(P,B,_);const e=j.clone();switch(t){case"basic":case"gltf":return void a.add(W);case"arrayPattern":case"textureOffset":e.rotateX(-Math.PI/2);break;case"transparentTextureWithGrid":e.rotateX(-Math.PI/2),e.position.y=3,E.position.y=-3,a.add(E);break;case"traverse":return q.selectedObjects=[W],X.addPass(q),void a.add(W)}a.add(e)}),[j,P,B,W]),(0,r.useEffect)((()=>{if(n.current){const e=n.current?.getElementsByTagName("canvas").length;e||n.current.appendChild(z.domElement)}}),[n.current]),(0,r.useEffect)((()=>{const e=()=>{switch(t){case"basic":case"transparentTextureWithGrid":default:break;case"traverse":return X.render(),void window.requestAnimationFrame(e);case"textureOffset":x.offset.x+=.001}z.render(a,F),window.requestAnimationFrame(e)};e()}),[t,a,F]),r.createElement(r.Fragment,null,r.createElement("div",{key:t,id:t,ref:n}),["traverse"].includes(t)&&r.createElement("div",{className:"flex"},"\u904d\u5386 & \u901a\u9053\u56fe"),["transparentTextureWithGrid"].includes(t)&&r.createElement("div",{className:"flex"},r.createElement("div",null,"\u900f\u660e\u8d34\u56fe\u5f00\u542f"),r.createElement(m.Z,{checked:C,onChange:e=>A(e)})),["textureOffset"].includes(t)&&r.createElement("div",null,r.createElement("div",null,r.createElement(f.ZP,{onClick:$},"\u4fdd\u5b58\u5f53\u524dcanvas\u4e3a\u56fe\u7247\u529f\u80fd~ \u70b9\u6211\u8bd5\u8bd5")),"\u5173\u4e8e\u8d34\u56fe\u4e0egeometry\u7684\u8d34\u56fe\u53d8\u5f62\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u53c2\u8003",r.createElement("a",{target:"_blank",href:"https://github.com/puxiao/threejs-tutorial/blob/main/25%20Three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92.md"},"\u8fd9\u4e2a\u6559\u7a0b\u91cc\u7684\u63cf\u8ff0")),["gltf"].includes(t)&&r.createElement("div",null,r.createElement(c.Z,{style:{width:"78%"},percent:O?100*G:100,status:"active",format:e=>""+(O?e+"%":"\u5df2\u52a0\u8f7d"+Math.round(G/1024/1024*100)/100+"M")}),r.createElement("div",null,"\u9700\u8981gltf\u9759\u6001\u8d44\u6e90\u505a\u6d4b\u8bd5\u7684\u540c\u5b66\u53ef\u4ee5\u76f4\u63a5",r.createElement("a",{target:"_blank",href:"/resource/fist.gltf"},"\u70b9\u8fd9\u91cc\u4e0b\u8f7d"),"\u8d44\u6e90\u6e90\u4e8e\u7f51\u7edc\uff0c\u4fb5\u5220")))}var T=n(57632);const C=e=>{const{type:t}=e,n=(0,r.useRef)(null),a=new o.CP7;a.setSize(800,500),a.setClearColor(16711918,.05);const s=new o.cPb(45,window.innerWidth/window.innerHeight,1,500);s.position.set(0,0,100),s.lookAt(0,0,0);const c=new o.xsS,i=new o.y8_(200);(0,r.useMemo)((()=>new l.z(s,a.domElement)),[a,t]);return(0,r.useEffect)((()=>{n.current&&(console.log((0,T.Z)()),n.current.appendChild(a.domElement))}),[n]),(0,r.useEffect)((()=>{const e=()=>{if("line"===t)c.add((()=>{const e=[new o.Pa4(-10,0,0),new o.Pa4(0,10,0),new o.Pa4(10,0,0)],t=(new o.u9r).setFromPoints(e),n=new o.nls({color:255});return new o.x12(t,n)})());c.add(i),a.render(c,s),window.requestAnimationFrame(e)};e()}),[t]),r.createElement(r.Fragment,null,r.createElement("div",{id:t,ref:n}),r.createElement("p",null,"line\u7ed8\u5236"))};var A=n(91262);const M={},j=void 0,P={unversionedId:"graphic/threejs/demo",id:"graphic/threejs/demo",title:"demo",description:"{() => (",source:"@site/docs/graphic/threejs/demo.mdx",sourceDirName:"graphic/threejs",slug:"/graphic/threejs/demo",permalink:"/docs/graphic/threejs/demo",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Threejs",permalink:"/docs/graphic/threejs/"},next:{title:"(WIP)3d - webgl",permalink:"/docs/graphic/webgl"}},S={},B=[],_={toc:B},F="wrapper";function Z(e){let{components:t,...n}=e;return(0,s.kt)(F,(0,a.Z)({},_,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(A.Z,{mdxType:"BrowserOnly"},(()=>(0,s.kt)(r.Fragment,null,(0,s.kt)(C,{type:"line",mdxType:"SceneCanvas"}),(0,s.kt)(x,{type:"basic",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"\u57fa\u7840geometry"),(0,s.kt)(x,{type:"line",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"draw line"),(0,s.kt)(x,{type:"texture",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"\u7403\u5f62\u8d34\u56fe"),(0,s.kt)(x,{type:"uv",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"\u5706\u5f62\u8d34\u56fe-uv\u5750\u6807\uff0c\u53ef\u4ee5\u9009\u62e9\u90e8\u5206\u5c55\u793a\uff0c4\u4e2a\u5750\u6807\uff0c\u8bbe\u5b9a\u9876\u70b9\u3002\uff08\u77e9\u5f62\uff09"),(0,s.kt)(x,{type:"arrayPattern",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"planeGeometry\u8d34\u56fe\u9635\u5217"),(0,s.kt)(x,{type:"transparentTextureWithGrid",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"\u900f\u660e\u8d34\u56feWith GridHelper"),(0,s.kt)(x,{type:"textureOffset",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"\u8d34\u56fe\u7684\u504f\u79fb-\u4fee\u6539UV\u9876\u70b9\u5750\u6807"),(0,s.kt)(x,{type:"gltf",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"gltf\u6a21\u578b\u52a0\u8f7d"),(0,s.kt)(x,{type:"traverse",mdxType:"ThreeCanvas"}),(0,s.kt)("p",null,"traverse")))))}Z.isMDXComponent=!0}}]);